import expect from 'expect'
import tasks from '../../src/reducers/tasks.jsx'

describe('tasks reducer', () => {
  it('should handle initial state', () => {
    expect(tasks(undefined, {})).toEqual([])
  })

  it('should handle ADD_TASK', () => {
    expect(tasks([], {
      type: 'ADD_TASK',
      text: 'task0',
      id: 0
    })).toEqual([{
      text: 'task0',
      completed: false,
      id: 0
    }])

    expect(
      tasks([{
        text: 'Run the tests',
        completed: false,
        id: 0
      }], {
        type: 'ADD_TASK',
        text: 'Use Redux',
        id: 1
      })
    ).toEqual([{
      text: 'Run the tests',
      completed: false,
      id: 0
    }, {
      text: 'Use Redux',
      completed: false,
      id: 1
    }])

    expect(
      tasks([{
        text: 'Run the tests',
        completed: false,
        id: 0
      }, {
        text: 'Use Redux',
        completed: false,
        id: 1
      }], {
        type: 'ADD_TASK',
        text: 'Fix the tests',
        id: 2
      })
    ).toEqual([{
      text: 'Run the tests',
      completed: false,
      id: 0
    }, {
      text: 'Use Redux',
      completed: false,
      id: 1
    }, {
      text: 'Fix the tests',
      completed: false,
      id: 2
    }])
  })

  it('should handle TOGGLE_TASK', () => {
    expect(
      tasks([{
        text: 'Run the tests',
        completed: false,
        id: 1
      }, {
        text: 'Use Redux',
        completed: false,
        id: 0
      }], {
        type: 'TOGGLE_TASK',
        id: 1
      })
    ).toEqual([{
      text: 'Run the tests',
      completed: true,
      id: 1
    }, {
      text: 'Use Redux',
      completed: false,
      id: 0
    }])
  })

})
